<html>
 <head></head> 
 <body> 
  <p>问题描述：<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 报表基于效率的原因，将页面和报表部署在不同服务器上，在页面中引入报表。此时如果想通过页面上的按钮对报表进行操作就会出现问题，无法调用报表的函数，IE提示没有权限，这就是javascript的跨域问题。Javascript出于安全性考虑，是不允许跨域调用其他页面的对象的。所以上述看似很普通的操作没办法实现。<br /> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 现在我们使用apache反向代理ProxyPass和mod_rewrite，实现页面按钮跨域调用润乾报表函数<br /> 具体设置方法：<br /> &nbsp;安装2.2版的apache服务器。打开配置文件conf\httpd.conf 。<br /> 先启用相关的功能,去掉这几项前面的“#”<br /> #LoadModule proxy_module modules/mod_proxy.so<br /> #LoadModule proxy_ajp_module modules/mod_proxy_ajp.so<br /> #LoadModule proxy_balancer_module modules/mod_proxy_balancer.so<br /> #LoadModule proxy_connect_module modules/mod_proxy_connect.so<br /> #LoadModule proxy_ftp_module modules/mod_proxy_ftp.so<br /> #LoadModule proxy_http_module modules/mod_proxy_http.so<br /> #LoadModule rewrite_module modules/mod_rewrite.so<br /> (在文件的最下面添加下面的几个设置)<br /> (页面要通过apache访问)<br /> &lt;IfModule mod_rewrite.c&gt;<br /> &nbsp;RewriteEngine On<br /> &nbsp;RewriteRule ^/show/(.*)$&nbsp; <a href="http://192.168.0.84:8080/show/$1">http://192.168.0.84:8080/show/$1</a><br /> &lt;/IfModule&gt;(遇到/show的请求会自动跳转。例如：apache的服务的路径为192.168.0.1:80<br /> 当输入http://192.168.0.1:80/show/show.jsp时，浏览器自动跳转到http://192.168.0.84:8080/show/show.jsp页面)<br /> (报表页面通过apache调用)</p> 
  <p>ProxyRequests Off<br /> ProxyPass /report&nbsp; balancer://name stickysession=jsessionid nofailover=On<br /> &lt;proxy balancer://name/&gt;<br /> &nbsp;&nbsp;&nbsp; BalancerMember <a href="http://192.168.28.131:8080/demo">http://192.168.28.131:8080/demo</a>&nbsp; loadfactor=1<br /> &lt;/proxy&gt;(报表raq文件通过apache调用)<br /> ProxyPass /reportFiles&nbsp; balancer://name stickysession=jsessionid nofailover=On<br /> &lt;proxy balancer://name/&gt;<br /> &nbsp;&nbsp;&nbsp; BalancerMember <a href="http://192.168.28.131:8080/demo">http://192.168.28.131:8080/demo</a>&nbsp; loadfactor=1<br /> &lt;/proxy&gt;<br /> (ProxyPass为代理转发的Url,即将所有访问/report的请求转发到群集下面设置的服务器上。<br /> loadfactor为各主机间的负载比例参数，可是设置不同指数<br /> BalancerMember为群集的成员，可以设置多个，即群集服务器A或B，负载均衡服务器会根据均衡规则来将请求转发给BalancerMember。(现在只设置一个)<br /> 例如：apache的服务的路径为192.168.0.1：80<br /> 当程序中引用的报表路径为http://192.168.0.1:80/report/jsp/report.jsp 时，apache会引入http://192.168.28.131:8080/demo/jsp/report.jsp这个文件)以上是Apache服务器的设置。<br /> 对于报表服务器还要做一些设置，因为经过了apache的转发会造成路径不对，设置固定的路径。<br /> 在报表服务器应用中的reportConfig.xml文件中设置<br /> &lt;config&gt;<br /> &nbsp; &lt;name&gt;appUrlPrefix&lt;/name&gt;<br /> &nbsp; &lt;value&gt;http://192.168.0.84:80/report&lt;/value&gt;<br /> &lt;/config&gt;<br /> &nbsp; http://192.168.0.84:80/report通过上面的设置，在进行访问的时候，所有的页面都处在同一个域中。js可以实现”跨域”调报表函数的功能。</p>  
 </body>
</html>