<html>
 <head></head> 
 <body> 
  <p><span style="font-size: 10pt; font-family: 宋体">问题</span><span xml:lang="EN-US" style="font-size: 10pt; font-family: 宋体" lang="EN-US">:</span><span xml:lang="EN-US" style="font-size: 12pt; font-family: 宋体" lang="EN-US"><br /> </span><span style="font-size: 10pt; font-family: 宋体">在使用润乾报表的过程中遇到这样一个问题，只是部分报表出现这样的问题，然后重启</span><span xml:lang="EN-US" style="font-size: 10pt; font-family: 宋体" lang="EN-US">TOMCAT</span><span style="font-size: 10pt; font-family: 宋体">就能解决这个问题，</span><span xml:lang="EN-US" style="font-size: 12pt; font-family: 宋体" lang="EN-US"><br /> </span><span style="font-size: 10pt; font-family: 宋体">这个是什么原因引起的？</span><span xml:lang="EN-US" style="font-size: 12pt; font-family: 宋体" lang="EN-US"><br /> </span><span xml:lang="EN-US" style="font-size: 10pt; font-family: 宋体" lang="EN-US">Exception:</span><span style="font-size: 10pt; font-family: 宋体">产生数据工厂：</span><span xml:lang="EN-US" style="font-size: 10pt; font-family: 宋体" lang="EN-US">com.runqian.report4.dataset.SQLDataSetFactory</span> <span style="font-size: 10pt; font-family: 宋体">失败</span><span xml:lang="EN-US" style="font-size: 12pt; font-family: 宋体" lang="EN-US"><br /> </span><span style="font-size: 10pt; font-family: 宋体">错误来源：数据集</span><span xml:lang="EN-US" style="font-size: 10pt; font-family: 宋体" lang="EN-US">ds1</span><span style="font-size: 10pt; font-family: 宋体">中，数据源</span><span xml:lang="EN-US" style="font-size: 10pt; font-family: 宋体" lang="EN-US">mysql</span><span style="font-size: 10pt; font-family: 宋体">未启动或设定错误，请检查数据源.</span><span xml:lang="EN-US" style="font-size: 12pt; font-family: 宋体" lang="EN-US"><br /> </span><span xml:lang="EN-US" style="font-size: 12pt; font-family: 宋体" lang="EN-US"><br /> </span><span style="font-size: 10pt; font-family: 宋体">问题解决</span><span xml:lang="EN-US" style="font-size: 10pt; font-family: 宋体" lang="EN-US">:</span><span xml:lang="EN-US" style="font-size: 12pt; font-family: 宋体" lang="EN-US"><br /> </span><span style="font-size: 10pt; font-family: 宋体">查看数据源连接代码</span><span xml:lang="EN-US" style="font-size: 10pt; font-family: 宋体" lang="EN-US">:</span><span xml:lang="EN-US" style="font-size: 12pt; font-family: 宋体" lang="EN-US"><br /> </span><span xml:lang="EN-US" style="font-size: 10pt; font-family: 宋体" lang="EN-US">ConnectionFactory con = new ConnectionFactory();</span><span xml:lang="EN-US" style="font-size: 12pt; font-family: 宋体" lang="EN-US"><br /> </span><span xml:lang="EN-US" style="font-size: 10pt; font-family: 宋体" lang="EN-US">DataSourceConfig dsc = new DataSourceConfig(2, true, “GBK”, “GBK”,</span><span xml:lang="EN-US" style="font-size: 12pt; font-family: 宋体" lang="EN-US"><br /> </span><span xml:lang="EN-US" style="font-size: 10pt; font-family: 宋体" lang="EN-US">false);</span><span xml:lang="EN-US" style="font-size: 12pt; font-family: 宋体" lang="EN-US"><br /> </span><span xml:lang="EN-US" style="font-size: 10pt; font-family: 宋体" lang="EN-US">context.setDataSourceConfig(“mysql”, dsc);</span><span xml:lang="EN-US" style="font-size: 12pt; font-family: 宋体" lang="EN-US"><br /> </span><span xml:lang="EN-US" style="font-size: 10pt; font-family: 宋体" lang="EN-US">context.setDefDataSourceName(“mysql”);</span><span xml:lang="EN-US" style="font-size: 12pt; font-family: 宋体" lang="EN-US"><br /> </span><span xml:lang="EN-US" style="font-size: 10pt; font-family: 宋体" lang="EN-US">context.setConnection(“mysql”, con.getConnection());</span><span xml:lang="EN-US" style="font-size: 12pt; font-family: 宋体" lang="EN-US"><br /> </span><span style="font-size: 10pt; font-family: 宋体">发现设置到润乾</span><span xml:lang="EN-US" style="font-size: 10pt; font-family: 宋体" lang="EN-US">context</span><span style="font-size: 10pt; font-family: 宋体">里的只有</span><span xml:lang="EN-US" style="font-size: 10pt; font-family: 宋体" lang="EN-US">connection,</span><span style="font-size: 10pt; font-family: 宋体">最好把数据连接工厂</span><span style="font-size: 10pt; font-family: 宋体">设置到</span><span style="font-size: 10pt; font-family: 宋体">当前</span><span xml:lang="EN-US" style="font-size: 10pt; font-family: 宋体" lang="EN-US">context</span><span style="font-size: 10pt; font-family: 宋体">里的</span><span xml:lang="EN-US" style="font-size: 12pt; font-family: 宋体" lang="EN-US"><br /> </span><span xml:lang="EN-US" style="font-size: 10pt; font-family: 宋体" lang="EN-US">connection</span><span style="font-size: 10pt; font-family: 宋体">被关闭时可以去连接工厂取</span><span xml:lang="EN-US" style="font-size: 10pt; font-family: 宋体" lang="EN-US">.<br /> </span><span style="font-size: 10pt; font-family: 宋体">例如</span><span xml:lang="EN-US" style="font-size: 10pt; font-family: 宋体" lang="EN-US">; context.setConnectionFactory(“mysql”, con);</span></p>  
 </body>
</html>