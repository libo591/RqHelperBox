<html>
 <head></head> 
 <body> 
  <p>在报表的部署以及使用中，经常会遇到一些数据源或者环境配置方面的问题，本文中就提供了两个测试常用的JSP，可以在出现相关问题时用来进行测试。</p> 
  <p><span style="color: #ff0000;">TestAWT.jsp–测试服务器端图形环境的jsp。一些统计图无法展现等图形问题，都是由于图形环境没有配置正确造成的。</span></p> 
  <p>&lt;%@ page language=”java” contentType=”text/html; charset=GB18030″<br /> pageEncoding=”GB18030″%&gt;<br /> &lt;jsp:directive.page import=”com.runqian.report4.model.expression.graph.DrawBase”/&gt;<br /> &lt;jsp:directive.page import=”java.awt.Color”/&gt;<br /> &lt;!DOCTYPE html PUBLIC “-//W3C//DTD HTML 4.01 Transitional//EN” “http://www.w3.org/TR/html4/loose.dtd”;<br /> &lt;html&gt;<br /> &lt;head&gt;<br /> &lt;meta http-equiv=”Content-Type” content=”text/html; charset=GB18030″&gt;<br /> &lt;title&gt;Insert title here&lt;/title&gt;<br /> &lt;/head&gt;<br /> &lt;body&gt;<br /> &lt;%<br /> response.setHeader(”Cache-Control”,”no-cache”);<br /> try{<br /> new DrawBase(){<br /> public void draw(StringBuffer arg0){<br /> Color color =new Color(palette.getColor(0));<br /> g.setColor(color);<br /> g.drawRect(300,300,500,500);</p> 
  <p>}<br /> };<br /> %&gt;<br /> 可以构建JAVA图形环境<br /> &lt;%<br /> }catch(Exception e){<br /> e.printStackTrace();<br /> %&gt;<br /> 无法构建JAVA图形环境<br /> &lt;%<br /> }<br /> %&gt;<br /> &lt;/body&gt;<br /> &lt;/html&gt;</p> 
  <p><span style="color: #ff0000;">all_prop.jsp–测试环境编码的jsp。系统环境的编码如果不正确，会导致中文字体或图形显示方块或乱码，用这个jsp可以测试出系统的环境编码。</span></p> 
  <p>&lt;%@ page language=”java” contentType=”text/html; charset=GB18030″<br /> pageEncoding=”GB18030″%&gt;<br /> &lt;jsp:directive.page import=”java.util.Properties”/&gt;<br /> &lt;jsp:directive.page import=”java.util.Set”/&gt;<br /> &lt;jsp:directive.page import=”java.util.Iterator”/&gt;<br /> &lt;!DOCTYPE html PUBLIC “-//W3C//DTD HTML 4.01 Transitional//EN” “http://www.w3.org/TR/html4/loose.dtd”&gt;<br /> &lt;html&gt;<br /> &lt;head&gt;<br /> &lt;meta http-equiv=”Content-Type” content=”text/html; charset=GB18030″&gt;<br /> &lt;title&gt;Insert title here&lt;/title&gt;<br /> &lt;/head&gt;<br /> &lt;body&gt;<br /> &lt;table&gt;<br /> &lt;tr&gt;<br /> &lt;td&gt;属性&lt;/td&gt;<br /> &lt;td&gt;值&lt;/td&gt;<br /> &lt;/tr&gt;<br /> &lt;%<br /> Properties props = System.getProperties();<br /> Set keys = props.keySet();</p> 
  <p>for(Iterator iter = keys.iterator();iter.hasNext();){<br /> String key = (String)iter.next();<br /> if(”file.encoding”.equalsIgnoreCase(key)){<br /> String value = props.getProperty(key);<br /> %&gt;<br /> &lt;tr&gt;<br /> &lt;td&gt;&lt;%=key %&gt;&lt;/td&gt;<br /> &lt;td&gt;&lt;%=value %&gt;&lt;/td&gt;<br /> &lt;/tr&gt;<br /> &lt;%<br /> }<br /> }<br /> %&gt;<br /> &lt;/table&gt;<br /> &lt;/body&gt;<br /> &lt;/html&gt;</p>  
 </body>
</html>